;;; init.el --- emacs init file

;;; Commentary:

;;; Code:


;; melpa
(when (>= emacs-major-version 24)
  (require 'package)
  (add-to-list
   'package-archives
   '("melpa" . "http://melpa.org/packages/")
   t)
  (package-initialize))

(custom-set-variables
 ;; custom-set-variables was added by Custom.
 ;; If you edit it by hand, you could mess it up, so be careful.
 ;; Your init file should contain only one such instance.
 ;; If there is more than one, they won't work right.
 '(frame-background-mode (quote dark))
 '(package-selected-packages
   (quote
    (auto-save-buffers-enhanced helm-projectile company-c-headers company-irony company-irony-c-headers irony irony-eldoc hexo go-guru company company-go go-mode indent-guide graphviz-dot-mode color-theme-solarized rainbow-delimiters blog-admin unicode-fonts highlight-indent-guides virtualenvwrapper helm-flycheck py-autopep8 flycheck elpy apples-mode markdown-mode helm use-package paredit systemtap-mode highlight-current-line window-numbering tabbar slime-company relative-line-numbers buttercup))))

(custom-set-faces
 ;; custom-set-faces was added by Custom.
 ;; If you edit it by hand, you could mess it up, so be careful.
 ;; Your init file should contain only one such instance.
 ;; If there is more than one, they won't work right.
 )


(add-to-list 'load-path
	     (expand-file-name "custom-packages" user-emacs-directory))

(eval-when-compile
  (require 'use-package)
  (require 'functions)
  (require 'global-env)
  (require 'theme-config)
  (require 'line-number-config)
  (require 'tabbar-config)
  (require 'site-packages-config)
  (require 'file-template)
  (require 'auto-backup-config)
  (require 'my-helm-config)
  (require 'global-keybind))

(add-hook 'prog-mode-hook (lambda ()
			    (require 'prog-mode-config)))

(add-hook 'python-mode-hook 'init-python-mode)
(add-hook 'lisp-mode-hook 'init-lisp-mode)
(add-hook 'emacs-lisp-mode-hook 'init-elisp-mode)
(add-hook 'org-mode-hook (lambda () (interactive)
			   (require 'org-mode-config)
			   (do-org-mode-init)))
(add-hook 'markdown-mode-hook (lambda () (interactive)
				(setq markdown-indent-on-enter nil)
				(set-face-foreground 'markdown-markup-face "white")))
(add-hook 'go-mode-hook 'init-golang-mode)
(add-hook 'c-mode-common-hook 'init-c-mode)

(setq auto-mode-alist (append '(("\\.cir$" . spice-mode)) auto-mode-alist))

(use-package blog-admin
  :commands (blog-admin-start)
  :config
  (setq blog-admin-backend-path "~/blog")
  (setq blog-admin-backend-type 'hexo)
  (setq blog-admin-backend-hexo-config-file "_config.yml")
  (setq blog-admin-backend-new-post-with-same-name-dir nil)
  (add-hook 'blog-admin-backend-after-new-post-hook 'find-file)
  (setq blog-admin-backend-hexo-template-org-post
	"#+TITLE: %s
#+DATE: %s
#+LAYOUT: post
#+COMMENTS: false
#+TAGS: tag1,tag2
#+CATEGORIES: cat1,cat2

文章摘要

#+BEGIN_HTML
<!--more-->
#+END_HTML

文章正文"))

(provide 'init)
